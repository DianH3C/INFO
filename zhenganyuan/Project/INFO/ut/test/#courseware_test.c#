#ifdef __cplusplus
extern "C"{
#endif

#include <string.h>
#include <sys/string_ex.h>

#include <sys/basetype.h>
#include <sys/error.h>
#include <sys/list.h>
#include "../../src/info.h"
#include "../../src/info_data.h"
#include "../../src/info_dbg.h"
#include "../../src/info_parse.h"
#include "../../src/info_proc.h"

#ifdef __cplusplus
}
#endif /* __cplusplus */

#include <gtest/gtest.h>
#include "../stub/stub.h"

#define UTC_INFO_proc_Add
/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_001
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: Ìí¼ÓÒ»¸ö³ÉÔ±ÐÅÏ¢³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : Ò»¸ö³ÉÔ±µÄÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢³É¹¦
               ²éÑ¯³ÉÔ±ÒÑ´æÔÚ
               ²éÑ¯³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 001)
{
    ULONG ulErrCode;
    BOOL_T bIsExist;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    bIsExist = INFO_data_IsExist(10);
    EXPECT_EQ(BOOL_TRUE, bIsExist);
    ulErrCode = INFO_data_GetData(10, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(20, stCfg.uiAge);
    EXPECT_EQ(175, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_002
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: Ìí¼ÓÎå¸ö³ÉÔ±ÐÅÏ¢³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ³ÉÔ±ÐÅÏ¢1£ºid=10 name=jack10 sex=1 age=30 height=100
               ³ÉÔ±ÐÅÏ¢2£ºid=1  name=jack1  sex=2 age=40 height=250
               ³ÉÔ±ÐÅÏ¢3£ºid=50 name=jack50 sex=1 age=50 height=200
               ³ÉÔ±ÐÅÏ¢4£ºid=99 name=jack99 sex=2 age=33 height=111
               ³ÉÔ±ÐÅÏ¢5£ºid=44 name=jack44 sex=1 age=22 height=222
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼ÓÎå¸ö³ÉÔ±ÐÅÏ¢³É¹¦
               ¿ÉÒÔ°´Ë³Ðò»ñÈ¡Îå¸ö³ÉÔ±ÐÅÏ¢
               ³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 002)
{
    ULONG ulErrCode;
    UINT uiId;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode  = INFO_proc_Add("id=10 name=jack10 sex=1 age=30 height=100");
    ulErrCode |= INFO_proc_Add("id=1  name=jack1  sex=2 age=40 height=250");
    ulErrCode |= INFO_proc_Add("id=50 name=jack50 sex=1 age=50 height=200");
    ulErrCode |= INFO_proc_Add("id=99 name=jack99 sex=2 age=33 height=111");
    ulErrCode |= INFO_proc_Add("id=44 name=jack44 sex=1 age=22 height=222");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    uiId = INFO_data_GetFirst();
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(1, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(40, stCfg.uiAge);
    EXPECT_EQ(250, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack1"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(30, stCfg.uiAge);
    EXPECT_EQ(100, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack10"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(44, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(22, stCfg.uiAge);
    EXPECT_EQ(222, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack44"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(50, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(50, stCfg.uiAge);
    EXPECT_EQ(200, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack50"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(99, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(33, stCfg.uiAge);
    EXPECT_EQ(111, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack99"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_003
#²â  ÊÔ  Ïî  : ±ß½ç²âÊÔ
#²âÊÔÓÃÀý±êÌâ: °´ºÏ·¨±ß½çÖµÌí¼ÓÓÃ»§ÐÅÏ¢³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ³ÉÔ±ÐÅÏ¢1(×îÐ¡±ß½çÖµ)£ºid=1      name=1               sex=1 age=18 height=1
               ³ÉÔ±ÐÅÏ¢2(×î´ó±ß½çÖµ)£ºid=100000 name=123456789012345 sex=2 age=65 height=300
               ³ÉÔ±ÐÅÏ¢3(Ð¡±ß½çÖµ1 )£ºid=2      name=11              sex=1 age=19 height=2
               ³ÉÔ±ÐÅÏ¢4(Ð¡±ß½çÖµ2 )£ºid=3      name=111             sex=1 age=20 height=3
               ³ÉÔ±ÐÅÏ¢5(´ó±ß½çÖµ1 )£ºid=99999  name=12345678901234  sex=2 age=64 height=299
               ³ÉÔ±ÐÅÏ¢6(´ó±ß½çÖµ2 )£ºid=99998  name=1234567890123   sex=2 age=63 height=298
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢³É¹¦
               ³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 003)
{
    ULONG ulErrCode;
    UINT uiId;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=1      name=1               sex=1 age=18 height=1  ");
    ulErrCode = INFO_proc_Add("id=100000 name=123456789012345 sex=2 age=65 height=300");
    ulErrCode = INFO_proc_Add("id=2      name=11              sex=1 age=19 height=2  ");
    ulErrCode = INFO_proc_Add("id=3      name=111             sex=1 age=20 height=3  ");
    ulErrCode = INFO_proc_Add("id=99999  name=12345678901234  sex=2 age=64 height=299");
    ulErrCode = INFO_proc_Add("id=99998  name=1234567890123   sex=2 age=63 height=298");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    uiId = INFO_data_GetFirst();
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(1, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(18, stCfg.uiAge);
    EXPECT_EQ(1, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "1"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(2, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(19, stCfg.uiAge);
    EXPECT_EQ(2, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "11"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(3, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(20, stCfg.uiAge);
    EXPECT_EQ(3, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "111"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(99998, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(63, stCfg.uiAge);
    EXPECT_EQ(298, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "1234567890123"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(99999, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(64, stCfg.uiAge);
    EXPECT_EQ(299, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "12345678901234"));
    uiId = INFO_data_GetNext(uiId);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(100000, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(65, stCfg.uiAge);
    EXPECT_EQ(300, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "123456789012345"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_004
#²â  ÊÔ  Ïî  : Ñ¹Á¦²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ´ó¹æ¸ñ²âÊÔ£¬Ìí¼Ó5000¸öÔ±¹¤ÐÅÏ¢
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : Ñ­»·Ìí¼Ó¶à¸ö³ÉÔ±ÐÅÏ¢£ºid=x name=jack sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢³É¹¦
               ³é²éÒ»¸öÔ±¹¤ÐÅÏ¢£¬ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 004)
{
    ULONG ulErrCode;
    UINT uiLoop;
    CHAR szInputStr[512];
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    for (uiLoop = 1; uiLoop < 100000; uiLoop = uiLoop + 20)
    {
        scnprintf(szInputStr, sizeof(szInputStr), "id=%u name=jack sex=2 age=20 height=175", uiLoop);
        ulErrCode |= INFO_proc_Add(szInputStr);
    }
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    ulErrCode = INFO_data_GetData(5001, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(5001, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(20, stCfg.uiAge);
    EXPECT_EQ(175, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_005
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ÖØ¸´Ìí¼Ó
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ³ÉÔ±ÐÅÏ¢£ºid=10 name=xxxx sex=1 age=55 height=222
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_ALREADY_EXIST
               ²éÑ¯³ÉÔ±ÒÑ´æÔÚ
               ²éÑ¯³ÉÔ±ÐÅÏ¢ÓëÔ¤ÖÃÌõ¼þÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 005)
{
    ULONG ulErrCode;
    BOOL_T bIsExist;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10 name=xxxx sex=1 age=55 height=222");
    EXPECT_EQ(ERROR_ALREADY_EXIST, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    bIsExist = INFO_data_IsExist(10);
    EXPECT_EQ(BOOL_TRUE, bIsExist);
    ulErrCode = INFO_data_GetData(10, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(20, stCfg.uiAge);
    EXPECT_EQ(175, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_006
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬ÓÃ»§ÐÅÏ¢ÊäÈë¿Õ×Ö·û´®
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºÊäÈë¿Õ×Ö·û´®
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 006)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_007
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬¹¤ºÅÎªÉÏÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=100001 name=jack             sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 007)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=100001 name=jack             sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_008
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬¹¤ºÅÎªÏÂÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=0      name=jack             sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 008)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=0      name=jack             sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_009
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬ÐÔ±ðÎªÉÏÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack             sex=3 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 009)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack             sex=3 age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_010
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬ÐÔ±ðÎªÏÂÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack             sex=0 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 010)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack             sex=0 age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_011
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬ÐÕÃû³¤¶ÈÎªÉÏÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=1234567890123456 sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 011)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=1234567890123456 sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_012
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬ÐÕÃû³¤¶ÈÎªÏÂÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=                 sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 012)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=                 sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_013
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬ÄêÁäÎªÉÏÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack             sex=2 age=66 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 013)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack             sex=2 age=66 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_014
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬ÄêÁäÎªÏÂÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack             sex=2 age=17 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 014)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack             sex=2 age=17 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_015
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬Éí¸ßÎªÉÏÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack             sex=2 age=20 height=301
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 015)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack             sex=2 age=20 height=301");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_016
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬Éí¸ßÎªÏÂÏÞ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack             sex=2 age=20 height=0
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 016)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack             sex=2 age=20 height=0");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_017
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬È±ÉÙ¹¤ºÅ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£º          name=jack             sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 017)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("          name=jack             sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_018
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬È±ÉÙÐÕÃû
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10                           sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 018)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10                           sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_019
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬È±ÉÙÐÔ±ð
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack                   age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 019)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack                   age=20 height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_020
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬È±ÉÙÄêÁä
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack             sex=2        height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 020)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack             sex=2        height=175");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_021
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ·Ç·¨ÊäÈë£¬È±ÉÙÉí¸ß
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10     name=jack             sex=2 age=20
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 021)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10     name=jack             sex=2 age=20           ");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Add_022
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ÉêÇëÄÚ´æÊ§°Ü
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
#Êä       Èë : ÓÃ»§ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : Ìí¼Ó³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»Ø´íÎóÂëERROR_NO_ENOUGH_RESOURCE
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Add, 022)
{
    ULONG ulErrCode;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¶Ômalloc´ò×®£¬ÉêÇëÄÚ´æÊ§°Ü */
    stub_set_one((VOID *)malloc, (VOID *)stub_malloc_ng);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_NO_ENOUGH_RESOURCE, ulErrCode);

    /* Çå³ý×® */
    stub_reset_all();

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

#define UT_CORRECTMEMBERNUM 15UL
STATIC const CHAR *g_szCorrectMemberInfo[UT_CORRECTMEMBERNUM] = {
    "id=11 name=jack01 sex=1 age=21 height=170",    /* 0 */
    "id=12 name=jack02 sex=2 age=22 height=171",
    "id=13 name=jack03 sex=1 age=23 height=172",
    "id=14 name=jack04 sex=2 age=24 height=173",
    "id=15 name=jack05 sex=1 age=25 height=174",
    "id=16 name=jack06 sex=2 age=26 height=175",    /* 5 */
    /* ¹¹Ôì3×éIDÏàÍ¬ÐÅÏ¢ */
    "id=17 name=jack07 sex=1 age=27 height=176",
    "id=18 name=jack08 sex=2 age=28 height=177",
    "id=19 name=jack09 sex=1 age=29 height=178",
    "id=17 name=jack10 sex=2 age=30 height=179",    /* 9 */
    "id=18 name=jack11 sex=1 age=31 height=180",
    "id=19 name=jack12 sex=2 age=32 height=181",
    /* ÒÔÏÂIDÏàÍ¬ */
    "id=20 name=jack13 sex=1 age=33 height=182",    /* 12 */
    "id=20 name=jack14 sex=2 age=34 height=183",
    "id=20 name=jack15 sex=1 age=35 height=184"     /* 14 */
};

/* Óëg_szCorrectMemberInfo¶ÔÓ¦ */
INFO_CFG_S g_stMemberData[UT_CORRECTMEMBERNUM] = {
 {11, 21, 170, INFO_SEX_FEMALE, "jack01"},
 {12, 22, 171, INFO_SEX_MALE,   "jack02"},
 {13, 23, 172, INFO_SEX_FEMALE, "jack03"},
 {14, 24, 173, INFO_SEX_MALE,   "jack04"},
 {15, 25, 174, INFO_SEX_FEMALE, "jack05"},
 {16, 26, 175, INFO_SEX_MALE,   "jack06"},
 {17, 27, 176, INFO_SEX_FEMALE, "jack07"},
 {18, 28, 177, INFO_SEX_MALE,   "jack08"},
 {19, 29, 178, INFO_SEX_FEMALE, "jack09"},
 {17, 30, 179, INFO_SEX_MALE,   "jack10"},
 {18, 31, 180, INFO_SEX_FEMALE, "jack11"},
 {19, 32, 181, INFO_SEX_MALE,   "jack12"},
 {20, 33, 182, INFO_SEX_FEMALE, "jack13"},
 {20, 34, 183, INFO_SEX_MALE,   "jack14"},
 {20, 35, 184, INFO_SEX_FEMALE, "jack15"}
};

#define UTC_INFO_proc_Delete
/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Delete_001
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: É¾³ý1¸ö³ÉÔ±³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : Ìí¼Ó1¸ö³ÉÔ±
#Êä       Èë : pcInputStr=Ô±¹¤ID
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÀý
#Ô¤ ÆÚ ½á ¹û : ³ÉÔ±É¾³ý
#              INFO_proc_Delete·µ»Ø³É¹¦
#Íê  ³É  ÈË  : liaohui kf2309
#ÈÕ      ÆÚ  : 2011-12-31
#######################################################################*/
TEST(UT_INFO_proc_Delete, 001)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;
    ULONG ulFirstMember = 0;

    /* ³õÊ¼»¯»·¾³ */
    INFO_data_Init();

    /* Ìí¼ÓÒ»¸ö³ÉÔ± */
    ulErrCode = INFO_proc_Add(g_szCorrectMemberInfo[ulFirstMember]);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    ulErrCode = INFO_data_GetData(g_stMemberData[ulFirstMember].uiId, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃ±»²âº¯Êý */
    ulErrCode = INFO_proc_Delete("id=11");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    ulErrCode = INFO_data_GetData(g_stMemberData[ulFirstMember].uiId, &stCfg);
    EXPECT_EQ(ERROR_FAILED, ulErrCode);


    /* È¥³õÊ¼»¯»·¾³ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Delete_002
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: É¾³ý3¸ö³ÉÔ±³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : Ìí¼Ó3¸ö³ÉÔ±
#Êä       Èë : pcInputStr=Ô±¹¤ID
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÀý
#Ô¤ ÆÚ ½á ¹û : ËùÓÐ³ÉÔ±É¾³ý
#              INFO_proc_Delete·µ»Ø³É¹¦
#Íê  ³É  ÈË  : liaohui kf2309
#ÈÕ      ÆÚ  : 2011-12-31
#######################################################################*/
TEST(UT_INFO_proc_Delete, 002)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;
    INT iMemberNum = 3;
    INT iCurMember;
    BOOL_T bIsEmpty;

    /* ³õÊ¼»¯»·¾³ */
    INFO_data_Init();

    /* Ìí¼Ó³ÉÔ± */
    for (iCurMember = 0; iCurMember < iMemberNum; iCurMember++)
    {
        ulErrCode = INFO_proc_Add(g_szCorrectMemberInfo[iCurMember]);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    for (iCurMember = iMemberNum - 1; iCurMember >= 0; iCurMember--)
    {
        /* µ÷ÓÃ±»²âº¯Êý */
        ulErrCode = INFO_proc_Delete(g_szCorrectMemberInfo[iCurMember]);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_FAILED, ulErrCode);
    }

    bIsEmpty = INFO_data_IsEmpty();
    EXPECT_EQ(BOOL_TRUE, bIsEmpty);

    /* È¥³õÊ¼»¯»·¾³ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Delete_003
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: É¾³ý5¸ö³ÉÔ±³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : Ìí¼Ó5¸ö³ÉÔ±
#Êä       Èë : pcInputStr=Ô±¹¤ID
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÀý
#Ô¤ ÆÚ ½á ¹û : ËùÓÐ³ÉÔ±É¾³ý
#              INFO_proc_Delete·µ»Ø³É¹¦
#Íê  ³É  ÈË  : liaohui kf2309
#ÈÕ      ÆÚ  : 2011-12-31
#######################################################################*/
TEST(UT_INFO_proc_Delete, 003)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;
    INT iMemberNum = 5;
    INT iCurMember;
    BOOL_T bIsEmpty;

    /* ³õÊ¼»¯»·¾³ */
    INFO_data_Init();

    /* Ìí¼Ó³ÉÔ± */
    for (iCurMember = 0; iCurMember < iMemberNum; iCurMember++)
    {
        ulErrCode = INFO_proc_Add(g_szCorrectMemberInfo[iCurMember]);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    for (iCurMember = iMemberNum - 1; iCurMember >=0; iCurMember--)
    {
        /* µ÷ÓÃ±»²âº¯Êý */
        ulErrCode = INFO_proc_Delete(g_szCorrectMemberInfo[iCurMember]);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_FAILED, ulErrCode);
    }

    bIsEmpty = INFO_data_IsEmpty();
    EXPECT_EQ(BOOL_TRUE, bIsEmpty);

    /* È¥³õÊ¼»¯»·¾³ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Delete_004
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: É¾³ýµÄ³ÉÔ±²»´æÔÚ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : Ìí¼Ó5¸ö³ÉÔ±
#Êä       Èë : pcInputStr=²»´æÔÚµÄÔ±¹¤ID
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÀý
#Ô¤ ÆÚ ½á ¹û : Ã»ÓÐ³ÉÔ±±»É¾³ý
#              INFO_proc_Delete·µ»Ø³É¹¦
#Íê  ³É  ÈË  : liaohui kf2309
#ÈÕ      ÆÚ  : 2011-12-31
#######################################################################*/
TEST(UT_INFO_proc_Delete, 004)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;
    INT iMemberNum = 5;
    INT iCurMember;

    /* ³õÊ¼»¯»·¾³ */
    INFO_data_Init();

    /* Ìí¼Ó³ÉÔ± */
    for (iCurMember = 0; iCurMember < iMemberNum; iCurMember++)
    {
        ulErrCode = INFO_proc_Add(g_szCorrectMemberInfo[iCurMember]);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    /* µ÷ÓÃ±»²âº¯Êý */
    ulErrCode = INFO_proc_Delete("id=1000");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    for (iCurMember = 0; iCurMember < iMemberNum; iCurMember++)
    {
        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    /* È¥³õÊ¼»¯»·¾³ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Delete_005
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: É¾³ýµÄ³ÉÔ±Ê§°Ü£¬ÊäÈëÎÞÐ§ID
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : Ìí¼Ó5¸ö³ÉÔ±
#Êä       Èë : pcInputStr=ÎÞÐ§Ô±¹¤ID
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÀý
#Ô¤ ÆÚ ½á ¹û : Ã»ÓÐ³ÉÔ±±»É¾³ý
#              INFO_proc_Delete·µ»ØERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : liaohui kf2309
#ÈÕ      ÆÚ  : 2011-12-31
#######################################################################*/
TEST(UT_INFO_proc_Delete, 005)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;
    INT iMemberNum = 5;
    INT iCurMember;

    /* ³õÊ¼»¯»·¾³ */
    INFO_data_Init();

    /* Ìí¼Ó³ÉÔ± */
    for (iCurMember = 0; iCurMember < iMemberNum; iCurMember++)
    {
        ulErrCode = INFO_proc_Add(g_szCorrectMemberInfo[iCurMember]);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    /* µ÷ÓÃ±»²âº¯Êý */
    ulErrCode = INFO_proc_Delete("id=0");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    for (iCurMember = 0; iCurMember < iMemberNum; iCurMember++)
    {
        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    /* µ÷ÓÃ±»²âº¯Êý */
    ulErrCode = INFO_proc_Delete("id=100001");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    for (iCurMember = 0; iCurMember < iMemberNum; iCurMember++)
    {
        ulErrCode = INFO_data_GetData(g_stMemberData[iCurMember].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    /* È¥³õÊ¼»¯»·¾³ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Delete_006
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: É¾³ý100000¸ö³ÉÔ±³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : Ìí¼Ó100000¸ö³ÉÔ±
#Êä       Èë : pcInputStr=Ô±¹¤ID
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÀý
#Ô¤ ÆÚ ½á ¹û : ËùÓÐ³ÉÔ±É¾³ý
#              INFO_proc_Delete·µ»Ø³É¹¦
#Íê  ³É  ÈË  : liaohui kf2309
#ÈÕ      ÆÚ  : 2011-12-31
#######################################################################*/
TEST(UT_INFO_proc_Delete, 006)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;
    INT iMemberNum = 10000;
    INT iCurMember;
    BOOL_T bIsEmpty;
    CHAR szInfo[INFO_IOBUF_MAXLEN];
    CHAR *pcString;
    UINT uiId;
    UINT uiCount;

    /* ³õÊ¼»¯»·¾³ */
    INFO_data_Init();

    pcString = szInfo;

    /* Ìí¼Ó³ÉÔ± */
    for (iCurMember = 1; iCurMember <= iMemberNum; iCurMember++)
    {
        (VOID)scnprintf(pcString, sizeof(szInfo), "id=%d name=jack01 sex=1 age=21 height=170", iCurMember);
        ulErrCode = INFO_proc_Add(pcString);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    uiCount = 0;
    INFO_FOREACH(uiId)
    {
        uiCount++;
    }
    EXPECT_EQ(iMemberNum, uiCount);

    for (iCurMember = iMemberNum; iCurMember > 0; iCurMember--)
    {
        pcString = szInfo;
        (VOID)scnprintf(pcString, sizeof(szInfo), "id=%u", iCurMember);

        /* µ÷ÓÃ±»²âº¯Êý */
        ulErrCode = INFO_proc_Delete(pcString);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    bIsEmpty = INFO_data_IsEmpty();
    EXPECT_EQ(BOOL_TRUE, bIsEmpty);

    /* È¥³õÊ¼»¯»·¾³ */
    INFO_data_Fini();
}

#define UTC_INFO_proc_Modify
/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_001
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ²¿·ÖÐÞ¸Ä£¬Ö»ÐÞ¸ÄÐÕÃû
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=10 name=jackabc
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢³É¹¦
               ²éÑ¯³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 001)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Modify("id=10 name=jackabc");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    ulErrCode = INFO_data_GetData(10, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(20, stCfg.uiAge);
    EXPECT_EQ(175, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jackabc"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_002
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ²¿·ÖÐÞ¸Ä£¬Ö»ÐÞ¸ÄÐÔ±ð
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=10 sex=1
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢³É¹¦
               ²éÑ¯³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 002)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Modify("id=10 sex=1");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    ulErrCode = INFO_data_GetData(10, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(20, stCfg.uiAge);
    EXPECT_EQ(175, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_003
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ²¿·ÖÐÞ¸Ä£¬Ö»ÐÞ¸ÄÄêÁä
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=10 age=35
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢³É¹¦
               ²éÑ¯³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 003)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Modify("id=10 age=35");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    ulErrCode = INFO_data_GetData(10, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(35, stCfg.uiAge);
    EXPECT_EQ(175, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_004
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ²¿·ÖÐÞ¸Ä£¬Ö»ÐÞ¸ÄÉí¸ß
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=10 height=181
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢³É¹¦
               ²éÑ¯³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 004)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Modify("id=10 height=181");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    ulErrCode = INFO_data_GetData(10, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(20, stCfg.uiAge);
    EXPECT_EQ(181, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_005
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ²¿·ÖÐÞ¸Ä£¬Ö»ÐÞ¸ÄÐÕÃûºÍÄêÁä
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=10 name=jack123456 age=45
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢³É¹¦
               ²éÑ¯³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 005)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Modify("id=10 name=jack123456 age=45");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    ulErrCode = INFO_data_GetData(10, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(2, stCfg.enSex);
    EXPECT_EQ(45, stCfg.uiAge);
    EXPECT_EQ(175, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack123456"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_006
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ²¿·ÖÐÞ¸Ä£¬Ö»ÐÞ¸ÄÐÔ±ð+Éí¸ß
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=10 sex=1 height=185
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢³É¹¦
               ²éÑ¯³ÉÔ±ÐÅÏ¢ÓëÊäÈëÒ»ÖÂ
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 006)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Modify("id=10 sex=1 height=185");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    ulErrCode = INFO_data_GetData(10, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(10, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(20, stCfg.uiAge);
    EXPECT_EQ(185, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jack"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_007
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ¹¤ºÅ²»´æÔÚ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=100 sex=1 height=185
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»ØERROR_NOT_FOUND
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 007)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Modify("id=100 sex=1 height=185");
    EXPECT_EQ(ERROR_NOT_FOUND, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_008
#²â  ÊÔ  Ïî  : Òì³£²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ¹¤ºÅÎª·Ç·¨Öµ
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ìí¼Ó³ÉÔ±ÐÅÏ¢£ºid=10 name=jack sex=2 age=20 height=175
#Êä       Èë : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=100005 sex=1 height=185
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢Ê§°Ü£¬·µ»ØERROR_INVALID_PARAMETER
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 008)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode  = INFO_data_Init();
    ulErrCode |= INFO_proc_Add("id=10 name=jack sex=2 age=20 height=175");
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃÌí¼Óº¯Êý */
    ulErrCode = INFO_proc_Modify("id=100005 sex=1 height=185");
    EXPECT_EQ(ERROR_INVALID_PARAMETER, ulErrCode);

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_009
#²â  ÊÔ  Ïî  : Ñ¹Á¦²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ÐÞ¸Ä´óÅúÁ¿µÄÓÃ»§ÐÅÏ¢
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : ³õÊ¼»¯Á´±í½á¹¹
               Ñ­»·ÊäÈë¶à¸öÓÃ»§ÐÅÏ¢£ºid=x name=jack sex=2 age=20 height=175
#Êä       Èë : Ñ­»·ÐÞ¸Ä³ÉÔ±ÐÅÏ¢£ºid=x name=jackabc sex=1 age=35 height=195
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÓÃÀý
#Ô¤ ÆÚ ½á ¹û : ÐÞ¸Ä³ÉÔ±ÐÅÏ¢³É¹¦
               ²éÑ¯ÓÃ»§ÐÅÏ¢ÐÞ¸ÄÕýÈ·
#Íê  ³É  ÈË  : wkf2298
#ÈÕ      ÆÚ  : 2011Äê12ÔÂ31ÈÕ
#######################################################################*/
TEST(UT_INFO_proc_Modify, 009)
{
    ULONG ulErrCode;
    UINT uiId;
    CHAR szInputStr[512];
    INFO_CFG_S stCfg;

    /* ³õÊ¼»¯ */
    ulErrCode = INFO_data_Init();
    for (uiId = 100000; uiId > 0; uiId = uiId - 20)
    {
        scnprintf(szInputStr, sizeof(szInputStr), "id=%u name=jack sex=2 age=20 height=175", uiId);
        ulErrCode |= INFO_proc_Add(szInputStr);
    }
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ±éÀúËùÓÐ¹¤ºÅ£¬µ÷ÓÃÐÞ¸Äº¯Êý */
    INFO_FOREACH(uiId)
    {
        scnprintf(szInputStr, sizeof(szInputStr), "id=%u name=jackabc sex=1 age=35 height=195", uiId);
        ulErrCode |= INFO_proc_Modify(szInputStr);
    }
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* ¼ì²éÔ¤ÆÚ½á¹û */
    uiId = INFO_data_GetNext(993);
    ulErrCode = INFO_data_GetData(uiId, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(uiId, stCfg.uiId);
    EXPECT_EQ(1, stCfg.enSex);
    EXPECT_EQ(35, stCfg.uiAge);
    EXPECT_EQ(195, stCfg.uiHeight);
    EXPECT_EQ(0, strcmp(stCfg.szName, "jackabc"));

    /* È¥³õÊ¼»¯ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_011
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ÐÞ¸Ä1¸ö³ÉÔ±ËùÓÐÐÅÏ¢³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : Ìí¼Ó1¸ö³ÉÔ±
#Êä       Èë : pcInputStr=Ô±¹¤ÐÅÏ¢
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÀý
#Ô¤ ÆÚ ½á ¹û : ³ÉÔ±Êý¾ÝÐÞ¸Ä
#              INFO_proc_Modify·µ»Ø³É¹¦
#Íê  ³É  ÈË  : liaohui kf2309
#ÈÕ      ÆÚ  : 2011-12-31
#######################################################################*/
TEST(UT_INFO_proc_Modify, 011)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;
    ULONG ulFirstMember = 12;

    /* ³õÊ¼»¯»·¾³ */
    INFO_data_Init();

    /* Ìí¼ÓÒ»¸ö³ÉÔ± */
    ulErrCode = INFO_proc_Add(g_szCorrectMemberInfo[ulFirstMember]);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    ulErrCode = INFO_data_GetData(g_stMemberData[ulFirstMember].uiId, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

    /* µ÷ÓÃ±»²âº¯Êý */
    ulErrCode = INFO_proc_Modify(g_szCorrectMemberInfo[ulFirstMember + 1]);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    ulErrCode = INFO_data_GetData(g_stMemberData[ulFirstMember].uiId, &stCfg);
    EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    EXPECT_EQ(g_stMemberData[ulFirstMember + 1].enSex, stCfg.enSex);
    EXPECT_EQ(g_stMemberData[ulFirstMember + 1].uiAge, stCfg.uiAge);
    EXPECT_EQ(g_stMemberData[ulFirstMember + 1].uiHeight, stCfg.uiHeight);
    EXPECT_STREQ(g_stMemberData[ulFirstMember + 1].szName, stCfg.szName);

    /* È¥³õÊ¼»¯»·¾³ */
    INFO_data_Fini();
}

/*#######################################################################
#²âÊÔÓÃÀý±àºÅ: UT_INFO_proc_Modify_012
#²â  ÊÔ  Ïî  : ¹¦ÄÜ²âÊÔ
#²âÊÔÓÃÀý±êÌâ: ÐÞ¸Ä3¸ö³ÉÔ±ËùÓÐÐÅÏ¢³É¹¦
#ÖØ Òª ¼¶ ±ð : ¸ß
#Ô¤ ÖÃ Ìõ ¼þ : Ìí¼Ó3¸ö³ÉÔ±
#Êä       Èë : pcInputStr=Ô±¹¤ÐÅÏ¢
#²Ù ×÷ ²½ Öè : Ö´ÐÐ²âÊÔÀý
#Ô¤ ÆÚ ½á ¹û : ËùÓÐ³ÉÔ±É¾³ý
#              INFO_proc_Modify·µ»Ø³É¹¦
#Íê  ³É  ÈË  : liaohui kf2309
#ÈÕ      ÆÚ  : 2011-12-31
#######################################################################*/
TEST(UT_INFO_proc_Modify, 012)
{
    ULONG ulErrCode;
    INFO_CFG_S stCfg;
    INT iStart = 6;
    INT iEnd = 9;
    INT iModifyStart = 9;
    INT iModifyEnd = 12;
    INT iCur;
    BOOL_T bIsEmpty;

    /* ³õÊ¼»¯»·¾³ */
    INFO_data_Init();

    /* Ìí¼Ó³ÉÔ± */
    for (iCur = iStart; iCur < iEnd; iCur++)
    {
        ulErrCode = INFO_proc_Add(g_szCorrectMemberInfo[iCur]);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);

        ulErrCode = INFO_data_GetData(g_stMemberData[iCur].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
    }

    for (iCur = iModifyStart; iCur < iModifyEnd; iCur++)
    {
        /* µ÷ÓÃ±»²âº¯Êý */
        ulErrCode = INFO_proc_Modify(g_szCorrectMemberInfo[iCur]);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
        ulErrCode = INFO_data_GetData(g_stMemberData[iCur].uiId, &stCfg);
        EXPECT_EQ(ERROR_SUCCESS, ulErrCode);
        EXPECT_EQ(g_stMemberData[iCur].enSex, stCfg.enSex);
        EXPECT_EQ(g_stMemberData[iCur].uiAge, stCfg.uiAge);
        EXPECT_EQ(g_stMemberData[iCur].uiHeight, stCfg.uiHeight);
        EXPECT_STREQ(g_stMemberData[iCur].szName, stCfg.szName);
    }

    bIsEmpty = INFO_data_IsEmpty();
    EXPECT_EQ(BOOL_FALSE, bIsEmpty);

    /* È¥³õÊ¼»¯»·¾³ */
    INFO_data_Fini();
}

